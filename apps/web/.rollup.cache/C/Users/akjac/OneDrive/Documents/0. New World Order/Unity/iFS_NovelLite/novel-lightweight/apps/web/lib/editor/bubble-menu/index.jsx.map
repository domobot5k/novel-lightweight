{"version":3,"file":"index.jsx","sourceRoot":"","sources":["index.tsx"],"names":[],"mappings":"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","sourcesContent":["import { BubbleMenu, BubbleMenuProps, isNodeSelection } from \"@tiptap/react\";\r\nimport { FC, useState } from \"react\";\r\nimport {\r\n  BoldIcon,\r\n  ItalicIcon,\r\n  UnderlineIcon,\r\n  StrikethroughIcon,\r\n  CodeIcon,\r\n} from \"lucide-react\";\r\nimport { NodeSelector } from \"./node-selector\";\r\nimport { ColorSelector } from \"./color-selector\";\r\nimport { LinkSelector } from \"./link-selector\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface BubbleMenuItem {\r\n  name: string;\r\n  isActive: () => boolean;\r\n  command: () => void;\r\n  icon: typeof BoldIcon;\r\n}\r\n\r\ntype EditorBubbleMenuProps = Omit<BubbleMenuProps, \"children\">;\r\n\r\nexport const EditorBubbleMenu: FC<EditorBubbleMenuProps> = (props) => {\r\n  const items: BubbleMenuItem[] = [\r\n    {\r\n      name: \"bold\",\r\n      isActive: () => props.editor.isActive(\"bold\"),\r\n      command: () => props.editor.chain().focus().toggleBold().run(),\r\n      icon: BoldIcon,\r\n    },\r\n    {\r\n      name: \"italic\",\r\n      isActive: () => props.editor.isActive(\"italic\"),\r\n      command: () => props.editor.chain().focus().toggleItalic().run(),\r\n      icon: ItalicIcon,\r\n    },\r\n    {\r\n      name: \"underline\",\r\n      isActive: () => props.editor.isActive(\"underline\"),\r\n      command: () => props.editor.chain().focus().toggleUnderline().run(),\r\n      icon: UnderlineIcon,\r\n    },\r\n    {\r\n      name: \"strike\",\r\n      isActive: () => props.editor.isActive(\"strike\"),\r\n      command: () => props.editor.chain().focus().toggleStrike().run(),\r\n      icon: StrikethroughIcon,\r\n    },\r\n    {\r\n      name: \"code\",\r\n      isActive: () => props.editor.isActive(\"code\"),\r\n      command: () => props.editor.chain().focus().toggleCode().run(),\r\n      icon: CodeIcon,\r\n    },\r\n  ];\r\n\r\n  const bubbleMenuProps: EditorBubbleMenuProps = {\r\n    ...props,\r\n    shouldShow: ({ state, editor }) => {\r\n      const { selection } = state;\r\n      const { empty } = selection;\r\n\r\n      // don't show bubble menu if:\r\n      // - the selected node is an image\r\n      // - the selection is empty\r\n      // - the selection is a node selection (for drag handles)\r\n      if (editor.isActive(\"image\") || empty || isNodeSelection(selection)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    tippyOptions: {\r\n      moveTransition: \"transform 0.15s ease-out\",\r\n      onHidden: () => {\r\n        setIsNodeSelectorOpen(false);\r\n        setIsColorSelectorOpen(false);\r\n        setIsLinkSelectorOpen(false);\r\n      },\r\n    },\r\n  };\r\n\r\n  const [isNodeSelectorOpen, setIsNodeSelectorOpen] = useState(false);\r\n  const [isColorSelectorOpen, setIsColorSelectorOpen] = useState(false);\r\n  const [isLinkSelectorOpen, setIsLinkSelectorOpen] = useState(false);\r\n\r\n  return (\r\n    <BubbleMenu\r\n      {...bubbleMenuProps}\r\n      className=\"novel-flex novel-w-fit novel-divide-x novel-divide-stone-200 novel-rounded novel-border novel-border-stone-200 novel-bg-white novel-shadow-xl\"\r\n    >\r\n      <NodeSelector\r\n        editor={props.editor}\r\n        isOpen={isNodeSelectorOpen}\r\n        setIsOpen={() => {\r\n          setIsNodeSelectorOpen(!isNodeSelectorOpen);\r\n          setIsColorSelectorOpen(false);\r\n          setIsLinkSelectorOpen(false);\r\n        }}\r\n      />\r\n      <LinkSelector\r\n        editor={props.editor}\r\n        isOpen={isLinkSelectorOpen}\r\n        setIsOpen={() => {\r\n          setIsLinkSelectorOpen(!isLinkSelectorOpen);\r\n          setIsColorSelectorOpen(false);\r\n          setIsNodeSelectorOpen(false);\r\n        }}\r\n      />\r\n      <div className=\"novel-flex\">\r\n        {items.map((item, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={item.command}\r\n            className=\"novel-p-2 novel-text-stone-600 hover:novel-bg-stone-100 active:novel-bg-stone-200\"\r\n            type=\"button\"\r\n          >\r\n            <item.icon\r\n              className={cn(\"novel-h-4 novel-w-4\", {\r\n                \"novel-text-blue-500\": item.isActive(),\r\n              })}\r\n            />\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <ColorSelector\r\n        editor={props.editor}\r\n        isOpen={isColorSelectorOpen}\r\n        setIsOpen={() => {\r\n          setIsColorSelectorOpen(!isColorSelectorOpen);\r\n          setIsNodeSelectorOpen(false);\r\n          setIsLinkSelectorOpen(false);\r\n        }}\r\n      />\r\n    </BubbleMenu>\r\n  );\r\n};\r\n"]}