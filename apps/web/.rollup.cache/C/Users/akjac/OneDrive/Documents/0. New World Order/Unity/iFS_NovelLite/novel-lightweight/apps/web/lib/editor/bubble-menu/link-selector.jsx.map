{"version":3,"file":"link-selector.jsx","sourceRoot":"","sources":["link-selector.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,gBAAgB,EAAE,MAAM,aAAa,CAAC;AAEnD,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,cAAc,CAAC;AAC5C,OAAO,EAAgC,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAQxE,MAAM,CAAC,MAAM,YAAY,GAA0B,CAAC,EAClD,MAAM,EACN,MAAM,EACN,SAAS,GACV,EAAE,EAAE;IACH,MAAM,QAAQ,GAAG,MAAM,CAAmB,IAAI,CAAC,CAAC;IAEhD,gCAAgC;IAChC,SAAS,CAAC,GAAG,EAAE;QACb,QAAQ,CAAC,OAAO,IAAI,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC;IAChD,CAAC,CAAC,CAAC;IAEH,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,gBAAgB,CAC7B;MAAA,CAAC,MAAM,CACL,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,4LAA4L,CACtM,OAAO,CAAC,CAAC,GAAG,EAAE;YACZ,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC;QACrB,CAAC,CAAC,CAEF;QAAA,CAAC,CAAC,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CACnC;QAAA,CAAC,CAAC,CACA,SAAS,CAAC,CAAC,EAAE,CACX,qEAAqE,EACrE;YACE,qBAAqB,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC/C,CACF,CAAC,CAEF;;QACF,EAAE,CAAC,CACL;MAAA,EAAE,MAAM,CACR;MAAA,CAAC,MAAM,IAAI,CACT,CAAC,IAAI,CACH,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;gBACd,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,MAAM,KAAK,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,CAAqB,CAAC;gBACrD,MAAM,GAAG,GAAG,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAC1C,GAAG,IAAI,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC;gBAC3D,SAAS,CAAC,KAAK,CAAC,CAAC;YACnB,CAAC,CAAC,CACF,SAAS,CAAC,uPAAuP,CAEjQ;UAAA,CAAC,KAAK,CACJ,GAAG,CAAC,CAAC,QAAQ,CAAC,CACd,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,cAAc,CAC1B,SAAS,CAAC,wEAAwE,CAClF,YAAY,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,EAExD;UAAA,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CACnC,CAAC,MAAM,CACL,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,qJAAqJ,CAC/J,OAAO,CAAC,CAAC,GAAG,EAAE;oBACZ,MAAM,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,EAAE,CAAC;oBACzC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACnB,CAAC,CAAC,CAEF;cAAA,CAAC,KAAK,CAAC,SAAS,CAAC,qBAAqB,EACxC;YAAA,EAAE,MAAM,CAAC,CACV,CAAC,CAAC,CAAC,CACF,CAAC,MAAM,CAAC,SAAS,CAAC,6HAA6H,CAC7I;cAAA,CAAC,KAAK,CAAC,SAAS,CAAC,qBAAqB,EACxC;YAAA,EAAE,MAAM,CAAC,CACV,CACH;QAAA,EAAE,IAAI,CAAC,CACR,CACH;IAAA,EAAE,GAAG,CAAC,CACP,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { cn, getUrlFromString } from \"@/lib/utils\";\r\nimport { Editor } from \"@tiptap/core\";\r\nimport { Check, Trash } from \"lucide-react\";\r\nimport { Dispatch, FC, SetStateAction, useEffect, useRef } from \"react\";\r\n\r\ninterface LinkSelectorProps {\r\n  editor: Editor;\r\n  isOpen: boolean;\r\n  setIsOpen: Dispatch<SetStateAction<boolean>>;\r\n}\r\n\r\nexport const LinkSelector: FC<LinkSelectorProps> = ({\r\n  editor,\r\n  isOpen,\r\n  setIsOpen,\r\n}) => {\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Autofocus on input by default\r\n  useEffect(() => {\r\n    inputRef.current && inputRef.current?.focus();\r\n  });\r\n\r\n  return (\r\n    <div className=\"novel-relative\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"novel-flex novel-h-full novel-items-center novel-space-x-2 novel-px-3 novel-py-1.5 novel-text-sm novel-font-medium novel-text-stone-600 hover:novel-bg-stone-100 active:novel-bg-stone-200\"\r\n        onClick={() => {\r\n          setIsOpen(!isOpen);\r\n        }}\r\n      >\r\n        <p className=\"novel-text-base\">â†—</p>\r\n        <p\r\n          className={cn(\r\n            \"novel-underline novel-decoration-stone-400 novel-underline-offset-4\",\r\n            {\r\n              \"novel-text-blue-500\": editor.isActive(\"link\"),\r\n            }\r\n          )}\r\n        >\r\n          Link\r\n        </p>\r\n      </button>\r\n      {isOpen && (\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n            const input = e.currentTarget[0] as HTMLInputElement;\r\n            const url = getUrlFromString(input.value);\r\n            url && editor.chain().focus().setLink({ href: url }).run();\r\n            setIsOpen(false);\r\n          }}\r\n          className=\"novel-fixed novel-top-full novel-z-[99999] novel-mt-1 novel-flex novel-w-60 novel-overflow-hidden novel-rounded novel-border novel-border-stone-200 novel-bg-white novel-p-1 novel-shadow-xl novel-animate-in novel-fade-in novel-slide-in-from-top-1\"\r\n        >\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            placeholder=\"Paste a link\"\r\n            className=\"novel-flex-1 novel-bg-white novel-p-1 novel-text-sm novel-outline-none\"\r\n            defaultValue={editor.getAttributes(\"link\").href || \"\"}\r\n          />\r\n          {editor.getAttributes(\"link\").href ? (\r\n            <button\r\n              type=\"button\"\r\n              className=\"novel-flex novel-items-center novel-rounded-sm novel-p-1 novel-text-red-600 novel-transition-all hover:novel-bg-red-100 dark:hover:novel-bg-red-800\"\r\n              onClick={() => {\r\n                editor.chain().focus().unsetLink().run();\r\n                setIsOpen(false);\r\n              }}\r\n            >\r\n              <Trash className=\"novel-h-4 novel-w-4\" />\r\n            </button>\r\n          ) : (\r\n            <button className=\"novel-flex novel-items-center novel-rounded-sm novel-p-1 novel-text-stone-600 novel-transition-all hover:novel-bg-stone-100\">\r\n              <Check className=\"novel-h-4 novel-w-4\" />\r\n            </button>\r\n          )}\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"]}